<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>訂單完成 - AI Style Advisor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-container">
        <div class="bg-pattern"></div>
        <div class="floating-elements">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
        </div>

        <!-- 導航欄 -->
        <nav class="navbar">
            <div class="container">
                <div class="navbar-content">
                    <div class="logo">✨ AI Style Advisor</div>
                    <ul class="nav-links">
                        <li><span class="text-success font-semibold">訂單完成</span></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- 主要內容 -->
        <div class="pt-24 pb-20 min-h-screen">
            <div class="container container-narrow">
                <!-- 成功動畫和標題 -->
                <div class="text-center mb-xl">
                    <div class="success-animation mb-lg">
                        <div class="success-checkmark">
                            <div class="check-icon">
                                <span class="icon-line line-tip"></span>
                                <span class="icon-line line-long"></span>
                                <div class="icon-circle"></div>
                                <div class="icon-fix"></div>
                            </div>
                        </div>
                    </div>
                    
                    <h1 class="title-section mb-md text-success">🎉 訂單完成！</h1>
                    <p class="text-secondary text-lg">感謝您的購買，我們已收到您的訂單</p>
                </div>

                <!-- 訂單資訊 -->
                <div class="card mb-xl">
                    <div class="card-header">
                        <h3 class="title-card">📋 訂單資訊</h3>
                    </div>
                    <div class="card-body">
                        <div class="order-info-grid">
                            <div class="info-item">
                                <span class="info-label">訂單編號</span>
                                <span class="info-value" id="orderNumber">AS1234567890</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">下單時間</span>
                                <span class="info-value" id="orderTime">2024/03/15 14:30</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">付款方式</span>
                                <span class="info-value" id="paymentMethod">信用卡付款</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">訂單金額</span>
                                <span class="info-value price" id="orderTotal">NT$ 2,664</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 穿搭方案回顧 -->
                <div class="card mb-xl">
                    <div class="card-header">
                        <h3 class="title-card">✨ 你的專屬穿搭方案</h3>
                    </div>
                    <div class="card-body">
                        <div class="outfit-review">
                            <div class="outfit-preview-large">
                                <div class="preview-icon" id="outfitIcon">👗</div>
                                <div class="preview-glow"></div>
                            </div>
                            <div class="outfit-details">
                                <h4 class="outfit-title" id="outfitTitle">優雅經典穿搭方案</h4>
                                <p class="outfit-description" id="outfitDescription">清新花卉洋裝搭配米色涼鞋，適合戶外婚禮的優雅造型</p>
                                <div class="outfit-tags">
                                    <span class="tag">透氣</span>
                                    <span class="tag">修身</span>
                                    <span class="tag">防曬</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 購買清單 -->
                <div class="card mb-xl">
                    <div class="card-header">
                        <h3 class="title-card">🛍️ 購買清單</h3>
                    </div>
                    <div class="card-body">
                        <div class="purchased-items" id="purchasedItems">
                            <!-- 動態填充購買項目 -->
                        </div>
                    </div>
                </div>

                <!-- 後續步驟 -->
                <div class="card mb-xl">
                    <div class="card-header">
                        <h3 class="title-card">📦 後續步驟</h3>
                    </div>
                    <div class="card-body">
                        <div class="next-steps">
                            <div class="step-item completed">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5>訂單確認</h5>
                                    <p>我們已收到您的訂單並開始處理</p>
                                </div>
                                <div class="step-status">✅</div>
                            </div>
                            
                            <div class="step-item upcoming">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5>商品備貨</h5>
                                    <p>各平台商家正在為您準備商品 (1-2個工作天)</p>
                                </div>
                                <div class="step-status">⏳</div>
                            </div>
                            
                            <div class="step-item upcoming">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5>配送通知</h5>
                                    <p>商品寄出後會立即通知您並提供追蹤號碼</p>
                                </div>
                                <div class="step-status">📦</div>
                            </div>
                            
                            <div class="step-item upcoming">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5>收貨完成</h5>
                                    <p>預計 3-5 個工作天內送達您指定的地址</p>
                                </div>
                                <div class="step-status">🏠</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 操作按鈕 -->
                <div class="action-buttons">
                    <div class="grid grid-2 gap-4 mb-lg">
                        <button class="btn btn-primary" onclick="checkOrder()">
                            📋 查看訂單詳情
                        </button>
                        <button class="btn btn-secondary" onclick="createNewOutfit()">
                            ✨ 創建新穿搭
                        </button>
                    </div>
                    
                    <div class="grid grid-2 gap-4">
                        <button class="btn btn-outline" onclick="shareOutfit()">
                            📤 分享我的穿搭
                        </button>
                        <button class="btn btn-outline" onclick="goToHome()">
                            🏠 返回首頁
                        </button>
                    </div>
                </div>

                <!-- 客服聯絡 -->
                <div class="customer-service mt-xl">
                    <div class="text-center p-6 rounded-lg" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3);">
                        <h4 class="font-semibold mb-md">💬 需要協助嗎？</h4>
                        <p class="text-secondary mb-md">
                            如有任何問題，我們的客服團隊隨時為您服務
                        </p>
                        <div class="flex justify-center gap-4">
                            <button class="btn btn-secondary text-sm" onclick="openChat()">
                                💬 線上客服
                            </button>
                            <button class="btn btn-secondary text-sm" onclick="callSupport()">
                                📞 電話客服
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 個性化推薦 -->
                <div class="recommendations mt-xl">
                    <h3 class="title-card mb-lg text-center">💡 為您推薦</h3>
                    <div class="grid grid-3 gap-4">
                        <div class="recommendation-card" onclick="exploreOutfits('business')">
                            <div class="rec-icon">💼</div>
                            <h5>商務穿搭</h5>
                            <p>探索專業場合的穿搭靈感</p>
                        </div>
                        
                        <div class="recommendation-card" onclick="exploreOutfits('casual')">
                            <div class="rec-icon">☕</div>
                            <h5>休閒風格</h5>
                            <p>發現日常舒適的搭配方案</p>
                        </div>
                        
                        <div class="recommendation-card" onclick="exploreOutfits('party')">
                            <div class="rec-icon">🎊</div>
                            <h5>派對造型</h5>
                            <p>打造令人驚艷的聚會look</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* 成功頁面樣式 */
        .text-success {
            color: var(--success);
        }

        /* 成功動畫 */
        .success-animation {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .success-checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: var(--success);
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px var(--success);
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
            position: relative;
        }

        .success-checkmark .check-icon {
            width: 56px;
            height: 56px;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .icon-line {
            height: 3px;
            background-color: var(--success);
            display: block;
            border-radius: 2px;
            position: absolute;
            z-index: 10;
        }

        .icon-line.line-tip {
            top: 19px;
            left: 14px;
            width: 25px;
            transform: rotate(45deg);
            animation: icon-line-tip .75s;
        }

        .icon-line.line-long {
            top: 24px;
            right: 8px;
            width: 47px;
            transform: rotate(-45deg);
            animation: icon-line-long .75s;
        }

        .icon-circle {
            top: -4px;
            left: -4px;
            z-index: 10;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: absolute;
            border: 4px solid var(--success);
        }

        .icon-fix {
            top: 8px;
            width: 5px;
            left: 26px;
            z-index: 1;
            height: 85px;
            position: absolute;
            transform: rotate(-45deg);
        }

        @keyframes icon-line-tip {
            0% { width: 0; left: 1px; top: 19px; }
            54% { width: 0; left: 1px; top: 19px; }
            70% { width: 50px; left: -8px; top: 37px; }
            84% { width: 17px; left: 21px; top: 48px; }
            100% { width: 25px; left: 14px; top: 19px; }
        }

        @keyframes icon-line-long {
            0% { width: 0; right: 46px; top: 24px; }
            65% { width: 0; right: 46px; top: 24px; }
            84% { width: 55px; right: 0px; top: 35px; }
            100% { width: 47px; right: 8px; top: 24px; }
        }

        @keyframes fill {
            100% { box-shadow: inset 0px 0px 0px 30px var(--success); }
        }

        @keyframes scale {
            0%, 100% { transform: none; }
            50% { transform: scale3d(1.1, 1.1, 1); }
        }

        /* 訂單資訊網格 */
        .order-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-md);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .info-label {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .info-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        .info-value.price {
            background: var(--gradient-main);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        /* 穿搭回顧 */
        .outfit-review {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .outfit-preview-large {
            position: relative;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #F3E8FF 0%, #FCE7F3 100%);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .preview-icon {
            font-size: 3rem;
            z-index: 2;
            position: relative;
        }

        .preview-glow {
            position: absolute;
            inset: -10px;
            background: var(--gradient-main);
            border-radius: var(--radius-xl);
            opacity: 0.3;
            filter: blur(15px);
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }

        @keyframes glow-pulse {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 0.6; transform: scale(1.05); }
        }

        .outfit-details {
            flex: 1;
        }

        .outfit-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .outfit-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        /* 購買項目 */
        .purchased-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .purchased-item:last-child {
            border-bottom: none;
        }

        .item-summary {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .item-icon-small {
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .item-info-summary h5 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .item-info-summary p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .item-price-summary {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* 步驟流程 */
        .next-steps {
            display: grid;
            gap: 1rem;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .step-item.completed {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--gradient-main);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-item.completed .step-number {
            background: var(--success);
        }

        .step-content {
            flex: 1;
        }

        .step-content h5 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .step-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .step-status {
            font-size: 1.5rem;
        }

        /* 推薦卡片 */
        .recommendation-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: var(--space-lg);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-purple);
            border-color: rgba(139, 92, 246, 0.5);
        }

        .rec-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .recommendation-card h5 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .recommendation-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .order-info-grid {
                grid-template-columns: 1fr;
            }
            
            .outfit-review {
                flex-direction: column;
                text-align: center;
            }
            
            .outfit-preview-large {
                margin: 0 auto;
            }
            
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <script>
        let orderData = null;

        const itemsData = {
            dress: { name: '清新花卉印花洋裝', price: 1190, icon: '👗', brand: 'ZARA' },
            shoes: { name: '米色編織涼鞋', price: 890, icon: '👠', brand: 'Charles & Keith' },
            bag: { name: '小巧藤編手提包', price: 590, icon: '👜', brand: 'Mango' },
            sunglasses: { name: '復古圓框太陽眼鏡', price: 290, icon: '🕶️', brand: 'H&M' }
        };

        const outfitData = {
            elegant: {
                title: '優雅經典穿搭方案',
                description: '清新花卉洋裝搭配米色涼鞋，適合戶外婚禮的優雅造型',
                icon: '👗'
            },
            sweet: {
                title: '休閒甜美穿搭方案',
                description: '粉色上衣配白色半身裙，甜美可愛的度假風格',
                icon: '👚'
            },
            modern: {
                title: '現代簡約穿搭方案',
                description: '簡約連身裙配輕薄外套，現代都會女性的選擇',
                icon: '🧥'
            }
        };

        function loadOrderData() {
            // 從localStorage獲取訂單資料
            const orderJson = localStorage.getItem('currentOrder');
            if (!orderJson) {
                // 如果沒有訂單資料，創建示例資料
                orderData = {
                    orderNumber: 'AS' + Date.now(),
                    outfit: 'elegant',
                    items: ['dress', 'shoes', 'bag', 'sunglasses'],
                    total: 2664,
                    timestamp: new Date().toISOString(),
                    paymentMethod: 'credit'
                };
            } else {
                orderData = JSON.parse(orderJson);
            }

            updateOrderDisplay();
        }

        function updateOrderDisplay() {
            // 更新訂單資訊
            document.getElementById('orderNumber').textContent = orderData.orderNumber;
            document.getElementById('orderTime').textContent = new Date(orderData.timestamp).toLocaleString('zh-TW');
            document.getElementById('orderTotal').textContent = `NT$ ${orderData.total.toLocaleString()}`;
            
            // 更新付款方式
            const paymentMethods = {
                credit: '信用卡付款',
                atm: 'ATM轉帳',
                cod: '貨到付款',
                linepay: 'LINE Pay'
            };
            document.getElementById('paymentMethod').textContent = paymentMethods[orderData.paymentMethod] || '信用卡付款';

            // 更新穿搭方案
            const outfit = outfitData[orderData.outfit] || outfitData.elegant;
            document.getElementById('outfitTitle').textContent = outfit.title;
            document.getElementById('outfitDescription').textContent = outfit.description;
            document.getElementById('outfitIcon').textContent = outfit.icon;

            // 更新購買清單
            updatePurchasedItems();
        }

        function updatePurchasedItems() {
            const container = document.getElementById('purchasedItems');
            let html = '';
            
            orderData.items.forEach(itemId => {
                const item = itemsData[itemId];
                if (item) {
                    html += `
                        <div class="purchased-item">
                            <div class="item-summary">
                                <div class="item-icon-small">${item.icon}</div>
                                <div class="item-info-summary">
                                    <h5>${item.name}</h5>
                                    <p>${item.brand}</p>
                                </div>
                            </div>
                            <div class="item-price-summary">NT$ ${item.price.toLocaleString()}</div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
        }

        function checkOrder() {
            alert(`訂單編號：${orderData.orderNumber}\n\n您可以使用此編號查詢訂單狀態。\n\n我們也會透過電子郵件發送詳細的訂單確認信給您。`);
        }

        function createNewOutfit() {
            if (confirm('確定要創建新的穿搭方案嗎？這將開始新的AI分析流程。')) {
                window.location.href = 'input.html';
            }
        }

        function shareOutfit() {
            if (navigator.share) {
                navigator.share({
                    title: 'AI Style Advisor - 我的專屬穿搭',
                    text: `我剛在AI Style Advisor完成了「${orderData.outfit}」穿搭方案！快來看看AI為我推薦的完美造型✨`,
                    url: window.location.origin
                });
            } else {
                // 備用分享方式
                const shareText = `我剛在AI Style Advisor完成了穿搭方案！快來體驗AI個人造型師的服務✨ ${window.location.origin}`;
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('分享文字已複製到剪貼簿！');
                });
            }
        }

        function goToHome() {
            window.location.href = 'index.html';
        }

        function openChat() {
            alert('線上客服功能開發中，您可以透過電話 02-1234-5678 聯絡我們的客服團隊。');
        }

        function callSupport() {
            alert('客服電話：02-1234-5678\n服務時間：週一至週五 09:00-18:00');
        }

        function exploreOutfits(category) {
            // 儲存探索類別並跳轉到輸入頁面
            localStorage.setItem('exploreCategory', category);
            window.location.href = 'input.html';
        }

        // 頁面初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderData();

            // 載入動畫
            const elements = document.querySelectorAll('.card, .action-buttons, .recommendations');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 150 + 1000); // 延遲一秒等成功動畫完成
            });

            // 自動滾動到頂部
            window.scrollTo(0, 0);

            // 5秒後顯示分享提示
            setTimeout(() => {
                const shareBtn = document.querySelector('[onclick="shareOutfit()"]');
                if (shareBtn) {
                    shareBtn.style.animation = 'pulse 1s ease-in-out 3';
                }
            }, 5000);
        });
    </script>
</body>
</html>