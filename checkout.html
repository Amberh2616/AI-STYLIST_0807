<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁµêÂ∏≥‰ªòÊ¨æ - AI Style Advisor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-container">
        <div class="bg-pattern"></div>
        <div class="floating-elements">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
        </div>

        <!-- Â∞éËà™Ê¨Ñ -->
        <nav class="navbar">
            <div class="container">
                <div class="navbar-content">
                    <div class="logo">‚ú® AI Style Advisor</div>
                    <ul class="nav-links">
                        <li><a href="details.html" class="nav-link">‚Üê ËøîÂõûÂïÜÂìÅË©≥ÊÉÖ</a></li>
                        <li><span class="text-primary font-semibold">ÁµêÂ∏≥‰ªòÊ¨æ</span></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
        <div class="pt-24 pb-20">
            <div class="container">
                <!-- È†ÅÈù¢Ê®ôÈ°å -->
                <div class="text-center mb-xl">
                    <h1 class="title-section mb-md">üõçÔ∏è Ë≥ºÁâ©ËªäÁµêÂ∏≥</h1>
                    <p class="text-secondary text-lg">Á¢∫Ë™çÊÇ®ÁöÑË®ÇÂñÆ‰∏¶ÈÅ∏Êìá‰ªòÊ¨æÊñπÂºè</p>
                </div>

                <!-- ÈÄ≤Â∫¶Ê¢ù -->
                <div class="mb-xl container-narrow">
                    <div class="flex justify-between items-center mb-sm text-sm text-secondary">
                        <span>Ë≥ºÁâ©ËªäÁµêÂ∏≥</span>
                        <span>ÊúÄÂæå‰∏ÄÊ≠•ÔºÅ</span>
                    </div>
                    <div style="width: 100%; height: 8px; background: rgba(139, 92, 246, 0.2); border-radius: 4px;">
                        <div style="width: 100%; height: 100%; background: var(--gradient-main); border-radius: 4px;"></div>
                    </div>
                </div>

                <div class="grid grid-2 gap-8">
                    <!-- Â∑¶ÂÅ¥ÔºöË®ÇÂñÆË©≥ÊÉÖ -->
                    <div>
                        <h3 class="title-card mb-lg">üì¶ Ë®ÇÂñÆË©≥ÊÉÖ</h3>
                        
                        <!-- Á©øÊê≠Ë≥áË®ä -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">‚ú® ‰Ω†ÁöÑÂ∞àÂ±¨Á©øÊê≠ÊñπÊ°à</h4>
                            </div>
                            <div class="card-body">
                                <div class="outfit-summary">
                                    <div class="flex items-center gap-4 mb-md">
                                        <div class="outfit-preview-small">üëó</div>
                                        <div>
                                            <h5 class="font-semibold" id="checkoutOutfitTitle">ÂÑ™ÈõÖÁ∂ìÂÖ∏Á©øÊê≠ÊñπÊ°à</h5>
                                            <p class="text-sm text-secondary">ÈÅ©ÂêàÊà∂Â§ñÂ©öÁ¶ÆÁöÑÂÑ™ÈõÖÈÄ†Âûã</p>
                                        </div>
                                    </div>
                                    <div class="outfit-tags-mini">
                                        <span class="tag-mini">ÈÄèÊ∞£</span>
                                        <span class="tag-mini">‰øÆË∫´</span>
                                        <span class="tag-mini">Èò≤Êõ¨</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂïÜÂìÅÂàóË°® -->
                        <div class="card">
                            <div class="card-header">
                                <h4 class="font-semibold">üõí Ë≥ºË≤∑Ê∏ÖÂñÆ</h4>
                            </div>
                            <div class="card-body">
                                <div class="checkout-items" id="checkoutItems">
                                    <!-- ÂãïÊÖãÂ°´ÂÖÖË≥ºË≤∑È†ÖÁõÆ -->
                                </div>
                                
                                <!-- ÂÑ™ÊÉ†Âà∏ -->
                                <div class="mt-lg p-4 rounded-lg" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3);">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <span class="font-semibold text-success">üéÅ È¶ñÊ¨°Ë≥ºË≤∑ÂÑ™ÊÉ†</span>
                                            <p class="text-sm text-secondary mt-1">ÊªøNT$ 2,000‰∫´9ÊäòÂÑ™ÊÉ†</p>
                                        </div>
                                        <span class="text-success font-semibold">-NT$ 296</span>
                                    </div>
                                </div>

                                <!-- Á∏ΩË®à -->
                                <div class="border-t border-white border-opacity-30 mt-lg pt-lg">
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>ÂïÜÂìÅÂ∞èË®à</span>
                                            <span id="subtotal">NT$ 2,960</span>
                                        </div>
                                        <div class="flex justify-between text-sm text-success">
                                            <span>È¶ñË≥ºÂÑ™ÊÉ†</span>
                                            <span>-NT$ 296</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>ÈÅãË≤ª</span>
                                            <span class="text-success">ÂÖçÈÅãË≤ª</span>
                                        </div>
                                        <div class="border-t border-white border-opacity-30 pt-3">
                                            <div class="flex justify-between items-center">
                                                <span class="font-semibold text-lg">Á∏ΩË®à</span>
                                                <span class="font-bold text-xl" style="background: var(--gradient-main); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="totalAmount">NT$ 2,664</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥ÂÅ¥Ôºö‰ªòÊ¨æË≥áË®ä -->
                    <div>
                        <h3 class="title-card mb-lg">üí≥ ‰ªòÊ¨æË≥áË®ä</h3>
                        
                        <!-- Êî∂‰ª∂Ë≥áË®ä -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">üìã Êî∂‰ª∂Ë≥áË®ä</h4>
                            </div>
                            <div class="card-body">
                                <form id="checkoutForm">
                                    <div class="form-group">
                                        <label class="form-label">Êî∂‰ª∂‰∫∫ÂßìÂêç</label>
                                        <input type="text" class="form-input" placeholder="Ë´ãËº∏ÂÖ•Êî∂‰ª∂‰∫∫ÂßìÂêç" id="recipientName" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ËÅØÁµ°ÈõªË©±</label>
                                        <input type="tel" class="form-input" placeholder="09xxxxxxxx" id="phone" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Êî∂‰ª∂Âú∞ÂùÄ</label>
                                        <textarea class="form-textarea" placeholder="Ë´ãËº∏ÂÖ•ÂÆåÊï¥Êî∂‰ª∂Âú∞ÂùÄ" id="address" rows="3" required></textarea>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- ‰ªòÊ¨æÊñπÂºè -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">üí∞ ‰ªòÊ¨æÊñπÂºè</h4>
                            </div>
                            <div class="card-body">
                                <div class="payment-methods">
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="credit" checked>
                                        <div class="payment-info">
                                            <div class="payment-icon">üí≥</div>
                                            <div>
                                                <div class="font-semibold">‰ø°Áî®Âç°‰ªòÊ¨æ</div>
                                                <div class="text-sm text-secondary">ÊîØÊè¥Visa„ÄÅMastercard„ÄÅJCB</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="atm">
                                        <div class="payment-info">
                                            <div class="payment-icon">üè¶</div>
                                            <div>
                                                <div class="font-semibold">ATMËΩâÂ∏≥</div>
                                                <div class="text-sm text-secondary">ËôõÊì¨Â∏≥ËôüÔºå3Â§©ÂÖßÂÆåÊàêËΩâÂ∏≥</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="cod">
                                        <div class="payment-info">
                                            <div class="payment-icon">üöö</div>
                                            <div>
                                                <div class="font-semibold">Ë≤®Âà∞‰ªòÊ¨æ</div>
                                                <div class="text-sm text-secondary">Êî∂‰ª∂ÊôÇ‰ª•ÁèæÈáë‰ªòÊ¨æ</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="linepay">
                                        <div class="payment-info">
                                            <div class="payment-icon">üì±</div>
                                            <div>
                                                <div class="font-semibold">LINE Pay</div>
                                                <div class="text-sm text-secondary">‰ΩøÁî®LINE PayÂø´ÈÄü‰ªòÊ¨æ</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Ê≥®ÊÑè‰∫ãÈ†Ö -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">‚ö†Ô∏è Ë≥ºË≤∑È†àÁü•</h4>
                            </div>
                            <div class="card-body">
                                <div class="text-sm text-secondary space-y-2">
                                    <p>‚Ä¢ ÂïÜÂìÅÂ∞áÂàÜÂà•ÂæûÂêÑÂπ≥Âè∞ÂØÑÂá∫ÔºåÂà∞Ë≤®ÊôÇÈñìÂèØËÉΩ‰∏çÂêå</p>
                                    <p>‚Ä¢ ÈÄÄÊèõË≤®ÊîøÁ≠ñ‰æùÂêÑÂπ≥Âè∞Ë¶èÂÆöËæ¶ÁêÜ</p>
                                    <p>‚Ä¢ Â∞∫ÂØ∏‰∏çÂêàÂèØ‰æùÂêÑÂìÅÁâåÊîøÁ≠ñËæ¶ÁêÜÊèõË≤®</p>
                                    <p>‚Ä¢ ÂÉπÊ†ºÂèØËÉΩÂõ†‰øÉÈä∑Ê¥ªÂãïË™øÊï¥Ôºå‰ª•‰∏ãÂñÆÊôÇÁÇ∫Ê∫ñ</p>
                                    <p>‚Ä¢ Ëã•ÂïÜÂìÅÁº∫Ë≤®Â∞á‰∏ªÂãïËÅØÁπ´Êèê‰æõÊõø‰ª£ÊñπÊ°à</p>
                                </div>
                            </div>
                        </div>

                        <!-- ÁµêÂ∏≥ÊåâÈàï -->
                        <div class="space-y-3">
                            <button class="btn btn-primary w-full btn-xl" onclick="processCheckout()">
                                üõçÔ∏è Á¢∫Ë™çË®ÇÂñÆ‰∏¶‰ªòÊ¨æ (NT$ 2,664)
                            </button>
                            <button class="btn btn-secondary w-full" onclick="goBack()">
                                ‚Üê ËøîÂõû‰øÆÊîπÂïÜÂìÅ
                            </button>
                        </div>

                        <!-- ÂÆâÂÖ®ÊèêÁ§∫ -->
                        <div class="mt-lg text-center">
                            <p class="text-sm text-secondary">
                                üîê ÊÇ®ÁöÑ‰ªòÊ¨æË≥áË®äÂèóSSLÂä†ÂØÜ‰øùË≠∑<br>
                                ÊàëÂÄëÁµï‰∏çÂÑ≤Â≠òÊÇ®ÁöÑ‰ø°Áî®Âç°Ë≥áË®ä
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* ÁµêÂ∏≥È†ÅÈù¢Ê®£Âºè */
        .outfit-preview-small {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #F3E8FF 0%, #FCE7F3 100%);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .outfit-tags-mini {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .tag-mini {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-purple);
            padding: 0.2rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            font-weight: 500;
        }

        .checkout-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .checkout-item:last-child {
            border-bottom: none;
        }

        .item-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .item-icon {
            font-size: 1.2rem;
        }

        .item-details h5 {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .item-details p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .item-price {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ‰ªòÊ¨æÊñπÂºèÊ®£Âºè */
        .payment-methods {
            display: grid;
            gap: 0.75rem;
        }

        .payment-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.1);
        }

        .payment-option input[type="radio"] {
            margin: 0;
        }

        .payment-option input[type="radio"]:checked + .payment-info {
            color: var(--primary-purple);
        }

        .payment-option:has(input[type="radio"]:checked) {
            border-color: var(--primary-purple);
            background: rgba(139, 92, 246, 0.1);
        }

        .payment-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
        }

        .payment-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        /* ÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                gap: 0.5rem;
            }
            
            .payment-option {
                padding: 0.75rem;
            }
        }
    </style>

    <script>
        let checkoutData = {
            type: 'all',
            outfit: 'elegant',
            items: [],
            total: 2664
        };

        const itemsData = {
            dress: { name: 'Ê∏ÖÊñ∞Ëä±ÂçâÂç∞Ëä±Ê¥ãË£ù', price: 1190, icon: 'üëó', brand: 'ZARA' },
            shoes: { name: 'Á±≥Ëâ≤Á∑®ÁπîÊ∂ºÈûã', price: 890, icon: 'üë†', brand: 'Charles & Keith' },
            bag: { name: 'Â∞èÂ∑ßËó§Á∑®ÊâãÊèêÂåÖ', price: 590, icon: 'üëú', brand: 'Mango' },
            sunglasses: { name: 'Âæ©Âè§ÂúìÊ°ÜÂ§™ÈôΩÁúºÈè°', price: 290, icon: 'üï∂Ô∏è', brand: 'H&M' }
        };

        function loadCheckoutData() {
            // ÂæûURLÂèÉÊï∏Áç≤ÂèñÁµêÂ∏≥È°ûÂûãÂíåÊï∏Êìö
            const urlParams = new URLSearchParams(window.location.search);
            checkoutData.type = urlParams.get('type') || 'all';
            checkoutData.outfit = urlParams.get('outfit') || 'elegant';
            
            if (checkoutData.type === 'selected') {
                const itemsParam = urlParams.get('items');
                checkoutData.items = itemsParam ? itemsParam.split(',') : [];
            } else {
                checkoutData.items = ['dress', 'shoes', 'bag', 'sunglasses'];
            }

            // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÂÖßÂÆπ
            updateCheckoutItems();
            updateTotals();
        }

        function updateCheckoutItems() {
            const container = document.getElementById('checkoutItems');
            let html = '';
            
            checkoutData.items.forEach(itemId => {
                const item = itemsData[itemId];
                if (item) {
                    html += `
                        <div class="checkout-item">
                            <div class="item-info">
                                <div class="item-icon">${item.icon}</div>
                                <div class="item-details">
                                    <h5>${item.name}</h5>
                                    <p>${item.brand}</p>
                                </div>
                            </div>
                            <div class="item-price">NT$ ${item.price.toLocaleString()}</div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
        }

        function updateTotals() {
            const subtotal = checkoutData.items.reduce((sum, itemId) => {
                const item = itemsData[itemId];
                return sum + (item ? item.price : 0);
            }, 0);
            
            const discount = Math.floor(subtotal * 0.1); // 10% ÊäòÊâ£
            const total = subtotal - discount;
            
            document.getElementById('subtotal').textContent = `NT$ ${subtotal.toLocaleString()}`;
            document.getElementById('totalAmount').textContent = `NT$ ${total.toLocaleString()}`;
            
            checkoutData.total = total;
            
            // Êõ¥Êñ∞ÁµêÂ∏≥ÊåâÈàï
            const checkoutBtn = document.querySelector('.btn-primary.btn-xl');
            checkoutBtn.innerHTML = `üõçÔ∏è Á¢∫Ë™çË®ÇÂñÆ‰∏¶‰ªòÊ¨æ (NT$ ${total.toLocaleString()})`;
        }

        function processCheckout() {
            // È©óË≠âË°®ÂñÆ
            const form = document.getElementById('checkoutForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const recipientName = document.getElementById('recipientName').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;

            if (!recipientName || !phone || !address) {
                alert('Ë´ãÂÆåÊï¥Â°´ÂØ´Êî∂‰ª∂Ë≥áË®ä');
                return;
            }

            // ÂÑ≤Â≠òË®ÇÂñÆË≥áÊñô
            const orderData = {
                orderNumber: 'AS' + Date.now(),
                outfit: checkoutData.outfit,
                items: checkoutData.items,
                total: checkoutData.total,
                recipient: {
                    name: recipientName,
                    phone: phone,
                    address: address
                },
                paymentMethod: paymentMethod,
                timestamp: new Date().toISOString(),
                status: 'confirmed'
            };

            localStorage.setItem('currentOrder', JSON.stringify(orderData));

            // Ê®°Êì¨‰ªòÊ¨æËôïÁêÜ
            const btn = document.querySelector('.btn-primary.btn-xl');
            const originalText = btn.innerHTML;
            btn.innerHTML = 'üîÑ ËôïÁêÜ‰∏≠...';
            btn.disabled = true;

            setTimeout(() => {
                window.location.href = 'success.html';
            }, 2000);
        }

        function goBack() {
            window.location.href = 'details.html';
        }

        // È†ÅÈù¢ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Ê™¢Êü•ÊòØÂê¶ÊúâÊúâÊïàÁöÑÁµêÂ∏≥Ë≥áÊñô
            const urlParams = new URLSearchParams(window.location.search);
            if (!urlParams.get('type')) {
                window.location.href = 'details.html';
                return;
            }

            loadCheckoutData();

            // ËºâÂÖ•ÂãïÁï´
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>