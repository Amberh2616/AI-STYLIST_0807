<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµå¸³ä»˜æ¬¾ - AI Style Advisor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-container">
        <div class="bg-pattern"></div>
        <div class="floating-elements">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
        </div>

        <!-- å°èˆªæ¬„ -->
        <nav class="navbar">
            <div class="container">
                <div class="navbar-content">
                    <div class="logo">âœ¨ AI Style Advisor</div>
                    <ul class="nav-links">
                        <li><a href="details.html" class="nav-link">â† è¿”å›å•†å“è©³æƒ…</a></li>
                        <li><span class="text-primary font-semibold">çµå¸³ä»˜æ¬¾</span></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- ä¸»è¦å…§å®¹ -->
        <div class="pt-24 pb-20">
            <div class="container">
                <!-- é é¢æ¨™é¡Œ -->
                <div class="text-center mb-xl">
                    <h1 class="title-section mb-md">ğŸ›ï¸ è³¼ç‰©è»Šçµå¸³</h1>
                    <p class="text-secondary text-lg">ç¢ºèªæ‚¨çš„è¨‚å–®ä¸¦é¸æ“‡ä»˜æ¬¾æ–¹å¼</p>
                </div>

                <!-- é€²åº¦æ¢ -->
                <div class="mb-xl container-narrow">
                    <div class="flex justify-between items-center mb-sm text-sm text-secondary">
                        <span>è³¼ç‰©è»Šçµå¸³</span>
                        <span>æœ€å¾Œä¸€æ­¥ï¼</span>
                    </div>
                    <div style="width: 100%; height: 8px; background: rgba(139, 92, 246, 0.2); border-radius: 4px;">
                        <div style="width: 100%; height: 100%; background: var(--gradient-main); border-radius: 4px;"></div>
                    </div>
                </div>

                <div class="grid grid-2 gap-8">
                    <!-- å·¦å´ï¼šè¨‚å–®è©³æƒ… -->
                    <div>
                        <h3 class="title-card mb-lg">ğŸ“¦ è¨‚å–®è©³æƒ…</h3>
                        
                        <!-- ç©¿æ­è³‡è¨Š -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">âœ¨ ä½ çš„å°ˆå±¬ç©¿æ­æ–¹æ¡ˆ</h4>
                            </div>
                            <div class="card-body">
                                <div class="outfit-summary">
                                    <div class="flex items-center gap-4 mb-md">
                                        <div class="outfit-preview-small">ğŸ‘—</div>
                                        <div>
                                            <h5 class="font-semibold" id="checkoutOutfitTitle">å„ªé›…ç¶“å…¸ç©¿æ­æ–¹æ¡ˆ</h5>
                                            <p class="text-sm text-secondary">é©åˆæˆ¶å¤–å©šç¦®çš„å„ªé›…é€ å‹</p>
                                        </div>
                                    </div>
                                    <div class="outfit-tags-mini">
                                        <span class="tag-mini">é€æ°£</span>
                                        <span class="tag-mini">ä¿®èº«</span>
                                        <span class="tag-mini">é˜²æ›¬</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å•†å“åˆ—è¡¨ -->
                        <div class="card">
                            <div class="card-header">
                                <h4 class="font-semibold">ğŸ›’ è³¼è²·æ¸…å–®</h4>
                            </div>
                            <div class="card-body">
                                <div class="checkout-items" id="checkoutItems">
                                    <!-- å‹•æ…‹å¡«å……è³¼è²·é …ç›® -->
                                </div>
                                
                                <!-- å„ªæƒ åˆ¸ -->
                                <div class="mt-lg p-4 rounded-lg" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3);">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <span class="font-semibold text-success">ğŸ é¦–æ¬¡è³¼è²·å„ªæƒ </span>
                                            <p class="text-sm text-secondary mt-1">æ»¿NT$ 2,000äº«9æŠ˜å„ªæƒ </p>
                                        </div>
                                        <span class="text-success font-semibold">-NT$ 296</span>
                                    </div>
                                </div>

                                <!-- ç¸½è¨ˆ -->
                                <div class="border-t border-white border-opacity-30 mt-lg pt-lg">
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>å•†å“å°è¨ˆ</span>
                                            <span id="subtotal">NT$ 2,960</span>
                                        </div>
                                        <div class="flex justify-between text-sm text-success">
                                            <span>é¦–è³¼å„ªæƒ </span>
                                            <span>-NT$ 296</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>é‹è²»</span>
                                            <span class="text-success">å…é‹è²»</span>
                                        </div>
                                        <div class="border-t border-white border-opacity-30 pt-3">
                                            <div class="flex justify-between items-center">
                                                <span class="font-semibold text-lg">ç¸½è¨ˆ</span>
                                                <span class="font-bold text-xl" style="background: var(--gradient-main); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="totalAmount">NT$ 2,664</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å³å´ï¼šä»˜æ¬¾è³‡è¨Š -->
                    <div>
                        <h3 class="title-card mb-lg">ğŸ’³ ä»˜æ¬¾è³‡è¨Š</h3>
                        
                        <!-- æ”¶ä»¶è³‡è¨Š -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">ğŸ“‹ æ”¶ä»¶è³‡è¨Š</h4>
                            </div>
                            <div class="card-body">
                                <form id="checkoutForm">
                                    <div class="form-group">
                                        <label class="form-label">æ”¶ä»¶äººå§“å</label>
                                        <input type="text" class="form-input" placeholder="è«‹è¼¸å…¥æ”¶ä»¶äººå§“å" id="recipientName" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">è¯çµ¡é›»è©±</label>
                                        <input type="tel" class="form-input" placeholder="09xxxxxxxx" id="phone" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">æ”¶ä»¶åœ°å€</label>
                                        <textarea class="form-textarea" placeholder="è«‹è¼¸å…¥å®Œæ•´æ”¶ä»¶åœ°å€" id="address" rows="3" required></textarea>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- ä»˜æ¬¾æ–¹å¼ -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">ğŸ’° ä»˜æ¬¾æ–¹å¼</h4>
                            </div>
                            <div class="card-body">
                                <div class="payment-methods">
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="credit" checked>
                                        <div class="payment-info">
                                            <div class="payment-icon">ğŸ’³</div>
                                            <div>
                                                <div class="font-semibold">ä¿¡ç”¨å¡ä»˜æ¬¾</div>
                                                <div class="text-sm text-secondary">æ”¯æ´Visaã€Mastercardã€JCB</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="atm">
                                        <div class="payment-info">
                                            <div class="payment-icon">ğŸ¦</div>
                                            <div>
                                                <div class="font-semibold">ATMè½‰å¸³</div>
                                                <div class="text-sm text-secondary">è™›æ“¬å¸³è™Ÿï¼Œ3å¤©å…§å®Œæˆè½‰å¸³</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="cod">
                                        <div class="payment-info">
                                            <div class="payment-icon">ğŸšš</div>
                                            <div>
                                                <div class="font-semibold">è²¨åˆ°ä»˜æ¬¾</div>
                                                <div class="text-sm text-secondary">æ”¶ä»¶æ™‚ä»¥ç¾é‡‘ä»˜æ¬¾</div>
                                            </div>
                                        </div>
                                    </label>
                                    
                                    <label class="payment-option">
                                        <input type="radio" name="payment" value="linepay">
                                        <div class="payment-info">
                                            <div class="payment-icon">ğŸ“±</div>
                                            <div>
                                                <div class="font-semibold">LINE Pay</div>
                                                <div class="text-sm text-secondary">ä½¿ç”¨LINE Payå¿«é€Ÿä»˜æ¬¾</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- æ³¨æ„äº‹é … -->
                        <div class="card mb-lg">
                            <div class="card-header">
                                <h4 class="font-semibold">âš ï¸ è³¼è²·é ˆçŸ¥</h4>
                            </div>
                            <div class="card-body">
                                <div class="text-sm text-secondary space-y-2">
                                    <p>â€¢ å•†å“å°‡åˆ†åˆ¥å¾å„å¹³å°å¯„å‡ºï¼Œåˆ°è²¨æ™‚é–“å¯èƒ½ä¸åŒ</p>
                                    <p>â€¢ é€€æ›è²¨æ”¿ç­–ä¾å„å¹³å°è¦å®šè¾¦ç†</p>
                                    <p>â€¢ å°ºå¯¸ä¸åˆå¯ä¾å„å“ç‰Œæ”¿ç­–è¾¦ç†æ›è²¨</p>
                                    <p>â€¢ åƒ¹æ ¼å¯èƒ½å› ä¿ƒéŠ·æ´»å‹•èª¿æ•´ï¼Œä»¥ä¸‹å–®æ™‚ç‚ºæº–</p>
                                    <p>â€¢ è‹¥å•†å“ç¼ºè²¨å°‡ä¸»å‹•è¯ç¹«æä¾›æ›¿ä»£æ–¹æ¡ˆ</p>
                                </div>
                            </div>
                        </div>

                        <!-- çµå¸³æŒ‰éˆ• -->
                        <div class="space-y-3">
                            <button class="btn btn-primary w-full btn-xl" onclick="processCheckout()">
                                ğŸ›ï¸ ç¢ºèªè¨‚å–®ä¸¦ä»˜æ¬¾ (NT$ 2,664)
                            </button>
                            <button class="btn btn-secondary w-full" onclick="goBack()">
                                â† è¿”å›ä¿®æ”¹å•†å“
                            </button>
                        </div>

                        <!-- å®‰å…¨æç¤º -->
                        <div class="mt-lg text-center">
                            <p class="text-sm text-secondary">
                                ğŸ” æ‚¨çš„ä»˜æ¬¾è³‡è¨Šå—SSLåŠ å¯†ä¿è­·<br>
                                æˆ‘å€‘çµ•ä¸å„²å­˜æ‚¨çš„ä¿¡ç”¨å¡è³‡è¨Š
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* çµå¸³é é¢æ¨£å¼ */
        .outfit-preview-small {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #F3E8FF 0%, #FCE7F3 100%);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .outfit-tags-mini {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .tag-mini {
            background: rgba(139, 92, 246, 0.1);
            color: var(--primary-purple);
            padding: 0.2rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            font-weight: 500;
        }

        .checkout-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .checkout-item:last-child {
            border-bottom: none;
        }

        .item-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .item-icon {
            font-size: 1.2rem;
        }

        .item-details h5 {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .item-details p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .item-price {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ä»˜æ¬¾æ–¹å¼æ¨£å¼ */
        .payment-methods {
            display: grid;
            gap: 0.75rem;
        }

        .payment-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.1);
        }

        .payment-option input[type="radio"] {
            margin: 0;
        }

        .payment-option input[type="radio"]:checked + .payment-info {
            color: var(--primary-purple);
        }

        .payment-option:has(input[type="radio"]:checked) {
            border-color: var(--primary-purple);
            background: rgba(139, 92, 246, 0.1);
        }

        .payment-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
        }

        .payment-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                gap: 0.5rem;
            }
            
            .payment-option {
                padding: 0.75rem;
            }
        }
    </style>

    <script>
        let checkoutData = {
            type: 'all',
            outfit: 'elegant',
            items: [],
            total: 2664
        };

        const itemsData = {
            dress: { name: 'æ¸…æ–°èŠ±å‰å°èŠ±æ´‹è£', price: 1190, icon: 'ğŸ‘—', brand: 'ZARA' },
            shoes: { name: 'ç±³è‰²ç·¨ç¹”æ¶¼é‹', price: 890, icon: 'ğŸ‘ ', brand: 'Charles & Keith' },
            bag: { name: 'å°å·§è—¤ç·¨æ‰‹æåŒ…', price: 590, icon: 'ğŸ‘œ', brand: 'Mango' },
            sunglasses: { name: 'å¾©å¤åœ“æ¡†å¤ªé™½çœ¼é¡', price: 290, icon: 'ğŸ•¶ï¸', brand: 'H&M' }
        };

        function loadCheckoutData() {
            // å¾URLåƒæ•¸ç²å–çµå¸³é¡å‹å’Œæ•¸æ“š
            const urlParams = new URLSearchParams(window.location.search);
            checkoutData.type = urlParams.get('type') || 'all';
            checkoutData.outfit = urlParams.get('outfit') || 'elegant';
            
            if (checkoutData.type === 'selected') {
                const itemsParam = urlParams.get('items');
                checkoutData.items = itemsParam ? itemsParam.split(',') : [];
            } else {
                checkoutData.items = ['dress', 'shoes', 'bag', 'sunglasses'];
            }

            // æ›´æ–°è³¼ç‰©è»Šå…§å®¹
            updateCheckoutItems();
            updateTotals();
        }

        function updateCheckoutItems() {
            const container = document.getElementById('checkoutItems');
            let html = '';
            
            checkoutData.items.forEach(itemId => {
                const item = itemsData[itemId];
                if (item) {
                    html += `
                        <div class="checkout-item">
                            <div class="item-info">
                                <div class="item-icon">${item.icon}</div>
                                <div class="item-details">
                                    <h5>${item.name}</h5>
                                    <p>${item.brand}</p>
                                </div>
                            </div>
                            <div class="item-price">NT$ ${item.price.toLocaleString()}</div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
        }

        function updateTotals() {
            const subtotal = checkoutData.items.reduce((sum, itemId) => {
                const item = itemsData[itemId];
                return sum + (item ? item.price : 0);
            }, 0);
            
            const discount = Math.floor(subtotal * 0.1); // 10% æŠ˜æ‰£
            const total = subtotal - discount;
            
            document.getElementById('subtotal').textContent = `NT$ ${subtotal.toLocaleString()}`;
            document.getElementById('totalAmount').textContent = `NT$ ${total.toLocaleString()}`;
            
            checkoutData.total = total;
            
            // æ›´æ–°çµå¸³æŒ‰éˆ•
            const checkoutBtn = document.querySelector('.btn-primary.btn-xl');
            checkoutBtn.innerHTML = `ğŸ›ï¸ ç¢ºèªè¨‚å–®ä¸¦ä»˜æ¬¾ (NT$ ${total.toLocaleString()})`;
        }

        function processCheckout() {
            // é©—è­‰è¡¨å–®
            const form = document.getElementById('checkoutForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const recipientName = document.getElementById('recipientName').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;

            if (!recipientName || !phone || !address) {
                alert('è«‹å®Œæ•´å¡«å¯«æ”¶ä»¶è³‡è¨Š');
                return;
            }

            // å„²å­˜è¨‚å–®è³‡æ–™
            const orderData = {
                orderNumber: 'AS' + Date.now(),
                outfit: checkoutData.outfit,
                items: checkoutData.items,
                total: checkoutData.total,
                recipient: {
                    name: recipientName,
                    phone: phone,
                    address: address
                },
                paymentMethod: paymentMethod,
                timestamp: new Date().toISOString(),
                status: 'confirmed'
            };

            localStorage.setItem('currentOrder', JSON.stringify(orderData));

            // æ¨¡æ“¬ä»˜æ¬¾è™•ç†
            const btn = document.querySelector('.btn-primary.btn-xl');
            const originalText = btn.innerHTML;
            btn.innerHTML = 'ğŸ”„ è™•ç†ä¸­...';
            btn.disabled = true;

            setTimeout(() => {
                window.location.href = 'success.html';
            }, 2000);
        }

        function goBack() {
            window.location.href = 'details.html';
        }

        // é é¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æª¢æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆçš„çµå¸³è³‡æ–™
            const urlParams = new URLSearchParams(window.location.search);
            if (!urlParams.get('type')) {
                window.location.href = 'details.html';
                return;
            }

            loadCheckoutData();

            // è¼‰å…¥å‹•ç•«
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>